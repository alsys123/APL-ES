<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comprehensive Exam System</title>

  <!-- External libraries -->
  <script src="https://apis.google.com/js/api.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

  <!-- Your own JS files -->
<!--
  <script src="pickerLoader.js?v=2" defer></script>
  <script src="mainline-v2.js?v=2" defer ></script>
  -->
  
  <!-- External CSS file -->
  <link rel="stylesheet" href="style.css?v=2">
</head>
  <body>
  <div id="MainContent"></div>
  <script>
    // Wait for base DOM to be parsed
    document.addEventListener("DOMContentLoaded", () => {
	
    fetch('body-v3.html')
      .then(response => response.text())
	    .then(html => {
		document.getElementById('MainContent').innerHTML = html;
		//console.log("at 1");
		loadScript('mainline-v4.js?v=2', () => {
		    // Show the picker screen
		    showScreen('pickLoaderScreen');
		    
		    // NOW load pickerLoader.js and run setup AFTER it loads
		    loadScript('pickerLoader.js?v=2', () => {
		//	console.log("pickerLoader.js loaded, running setup...");
			if (typeof setupPickerLoaderUI === "function") {
			    setupPickerLoaderUI();
			} else {
			    console.error("setupPickerLoaderUI is not defined");
			}
		    });
		});
	    }).catch(err => console.error('Error loading body-v3.html:', err));

    });

    //
    function loadScript(src, onload) {
	const s = document.createElement('script');
	s.src = src;
	s.defer = true;
	if (onload) s.onload = onload;
	document.body.appendChild(s);
    } //loadScript
    
  </script>

  
</body>
</html>
